{"version":3,"file":"bundle.js","sources":["web/src/functions.js","web/src/index.js"],"sourcesContent":["export function table(){\n    table = document.createElement('table');\n    table.appendChild(tableHeaders());\n    table.appendChild(tableContent());\n    return table;\n}\nfunction tableHeaders(){\n    tableHeaders = document.createElement('thead');\n    fetchJson(\"selecao-info.php\").then(\n        data=>{\n            data.forEach( position=>{\n                    let header = document.createElement('th');\n                    header.innerText = position;\n                    tableHeaders.appendChild(header);\n                }\n            )\n            let actions = document.createElement('th');\n            actions.innerHTML= \"\"\n            tableHeaders.appendChild(actions);\n        }\n    )\n    return tableHeaders;\n}\nfunction tableContent(){\n    tableContent = document.createElement('tbody');\n    fetchJson(\"selecao-list.php\").then(data => {\n       data.forEach(position => {\n           let tableRow = document.createElement('tr');\n           for(let value in position ){\n               let cell = document.createElement('td');\n               cell.innerText = position[value];\n               cell.contentEditable = true;\n               cell.onblur = function(){\n                    sendRequest(rowtoJson(deleteButton.parentElement),\"selecao-update.php\")\n               }\n               tableRow.appendChild(cell);\n           }\n           let deleteButton = document.createElement('td');\n           deleteButton.innerHTML=\"<i class='fas fa-minus-circle zoomFont'></i>\"\n           deleteButton.onclick = function(){\n                sendRequest(rowtoJson(deleteButton.parentElement),\"selecao-delete.php\")\n                tableContent.removeChild(deleteButton.parentElement);\n           }\n           tableRow.appendChild(deleteButton)\n           tableContent.appendChild(tableRow);\n       });\n    }\n    );\n    return tableContent;\n}\nexport async function fetchJson(file){\n    let response = await fetch('/backend/'+file);\n    let data = await response.json();\n    return data;\n}\nexport function rowtoJson(row){\n    let obj = {};\n    for( let i = 0 ; i< row.cells.length-1 ; i++){\n        if(row.cells[i].innerText != \"\" && row.cells[i].innerText != \"\\n\"){\n            obj[document.getElementsByTagName('thead')[0].childNodes[i].innerText.toLowerCase()] = row.cells[i].innerText.replace('\\n','');\n        }\n        else{\n            obj[document.getElementsByTagName('thead')[0].childNodes[i].innerText.toLowerCase()] = null;\n        }\n    }\n    return JSON.stringify(obj);\n}\nexport async function sendRequest(json,file){\n    console.log(json);\n  \n    var myRequest = new Request('/backend/'+ file ,\n    {\n        method: 'post',\n        body: json,\n        headers: {\n            'Content-Type': 'text/json'\n        }\n    }\n    );\n    let response = await fetch(myRequest);\n    let data = await response.json();\n    if(data['err'] != undefined){\n        window.alert(data['err']);\n        location.reload();\n    } \n\n    return data;\n}\nexport function addForm(){\n    let div = document.createElement('div');\n    let formTitle = document.createElement('h3');\n    formTitle.align = \"center\";\n    formTitle.innerText = \"Formulario de AdesÃ£o\"\n    let form = document.createElement('form');\n    div.appendChild(formTitle)\n    div.appendChild(form)\n    fetchJson(\"selecao-info.php\").then(\n        data=>{\n            data.forEach( position=>{\n                    if( position == \"_id\") return;\n                    let input = document.createElement('input');\n                    input.name = position;\n                    input.placeholder = position.charAt(0).toUpperCase() + position.slice(1);;\n                    input.required = true;\n                    form.appendChild(input);\n                }\n            )\n        }\n       \n    )\n    return div;\n}\nexport function formtoJson(form){\n    let obj = {};\n    for( let i = 0 ; i< form.length ; i++){\n            console.log(form[i].value);\n            obj[form[i].placeholder.toLowerCase()] = form[i].value;\n    }\n    return JSON.stringify(obj);\n}\nexport function addButton(){\n    let button = document.createElement('button');\n    button.innerText = \"Adicionar\";\n    button.className = \"zoom\";\n    button.style = \" --zoomSize : 1.2 \"\n    button.onclick = function(){\n        sendRequest(formtoJson(document.getElementsByTagName('form')[0]),\"selecao-insert.php\").then( done=>location.reload());  \n    } \n    button.type = \"submit\";\n    return button;\n}\nexport function filter(){\n    let filter = document.createElement('input');\n    filter.placeholder = \"Filtro\";\n    filter.id = \"filtro\"\n    filter.oninput = function (e){\n        let text = e.target.value;\n        let table = document.getElementsByTagName('tbody')[0]\n        let rows = table.children;\n        for(let i = 0 ; i<rows.length ;i++){\n           let find = false;\n           for(let j = 0 ; j<rows[i].children.length; j++ ){\n               if(rows[i].children[j].innerText.toLowerCase().indexOf(text.toLowerCase()) != -1){\n                    find = true;\n                    break;\n                   \n               }\n           }\n           if(!find){\n               rows[i].hidden = true;\n           }else{\n               rows[i].hidden = false;\n           }\n        }\n    }\n    return filter;\n}\n","import backendTest from './backend-test.js';\nimport {filter,addButton,table,fetchJson,rowtoJson,sendRequest,addForm} from './functions.js';\n\nexport default element => {\n    window.onkeypress= (e)=>{\n       if(e.key == \"Enter\"){\n           document.getElementsByTagName('button')[0].onclick();\n       }\n    }\n    element.appendChild(filter());\n    element.appendChild(table());\n    element.appendChild(addForm());\n    element.appendChild(addButton());\n}\n"],"names":[],"mappings":"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"}